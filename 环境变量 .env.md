您提出了一个非常重要的问题。保护敏感信息（如 API 密钥和访问凭证）是软件开发中的关键安全实践。以下是几种隐藏这些敏感信息的方法：

1. 使用环境变量

这是最常用和推荐的方法之一：

uploadImage.ts

Ask

Copy

Apply

const bucket = process.env.OBS_BUCKET;

const endpoint = process.env.OBS_ENDPOINT;

const accessKeyId = process.env.OBS_ACCESS_KEY_ID;

const secretAccessKey = process.env.OBS_SECRET_ACCESS_KEY;

然后，您可以在项目根目录创建一个 .env 文件来存储这些值：

OBS_BUCKET=hxc1

OBS_ENDPOINT=obs.cn-south-1.myhuaweicloud.com

OBS_ACCESS_KEY_ID=7BPNPQSANNQZTG7MBHEF

OBS_SECRET_ACCESS_KEY=YpbJ6gELOWrM7OcLCopPhePC8LBMtV7p7Y69tnQ8

记得将 .env 文件添加到 .gitignore 中，以防止它被提交到版本控制系统。

- 使用配置文件

创建一个单独的配置文件，例如 config.ts：

config.ts

Ask

Copy

Apply

export const obsConfig = {

  bucket: "hxc1",

  endpoint: "obs.cn-south-1.myhuaweicloud.com",

  accessKeyId: "7BPNPQSANNQZTG7MBHEF",

  secretAccessKey: "YpbJ6gELOWrM7OcLCopPhePC8LBMtV7p7Y69tnQ8"

};

然后在 uploadImage.ts 中导入：

uploadImage.ts

Ask

Copy

Apply

import { obsConfig } from '../config';

const { bucket, endpoint, accessKeyId, secretAccessKey } = obsConfig;

同样，确保将 config.ts 添加到 .gitignore 中。

3. 使用密钥管理服务

对于更高级的应用，可以考虑使用云服务提供商的密钥管理服务，如 AWS Secrets Manager 或 Azure Key Vault。

4. 使用移动应用安全性解决方案

对于移动应用，可以考虑使用专门的移动应用安全性解决方案，如 Firebase Remote Config 或 AppCenter。

无论选择哪种方法，都要记住：

- 永远不要将敏感信息直接硬编码到源代码中。

- 不要将包含敏感信息的文件提交到版本控制系统。

- 在团队中建立安全的密钥共享机制。

- 定期轮换密钥和访问凭证。

实施这些做法后，您的应用将更加安全，敏感信息也会得到更好的保护。如果您需要关于如何在您的特定环境中实施这些方法的更多指导，请随时询问。

.env

File

uploadImage.ts

File

环境变量文件会自动使用么

非常感谢您的问题。让我为您解释一下环境变量的使用方法，并提供一些建议。

首先，您提供的 .env 文件内容实际上是一个 TypeScript 对象，而不是标准的环境变量格式。我们需要修改一下。

- 修改 .env 文件

将 .env 文件内容修改为标准的环境变量格式：

OBS_BUCKET=hxc1

OBS_ENDPOINT=obs.cn-south-1.myhuaweicloud.com

OBS_ACCESS_KEY_ID=7BPNPQSANNQZTG7MBHEF

OBS_SECRET_ACCESS_KEY=YpbJ6gELOWrM7OcLCopPhePC8LBMtV7p7Y69tnQ8

- 使用环境变量

环境变量不会自动被使用，我们需要一些额外的设置：

- 对于 React Native 项目，您需要使用 react-native-dotenv 或类似的库来加载 .env 文件。

安装 react-native-dotenv：

npm install react-native-dotenv

或

yarn add react-native-dotenv

然后，在您的 babel.config.js 文件中添加插件：

babel.config.js

Ask

Copy

Apply

module.exports = {

  presets: ['module:metro-react-native-babel-preset'],

  plugins: [

    ['module:react-native-dotenv']

  ]

};

3. 修改 uploadImage.ts

现在，我们可以在 uploadImage.ts 中这样使用环境变量：

uploadImage.ts

Ask

Copy

Apply

import { OBS_BUCKET, OBS_ENDPOINT, OBS_ACCESS_KEY_ID, OBS_SECRET_ACCESS_KEY } from '@env';

import ObsClient from "esdk-obs-browserjs";

import { manipulateAsync, SaveFormat } from 'expo-image-manipulator';

const bucket = OBS_BUCKET;

const endpoint = OBS_ENDPOINT;

const accessKeyId = OBS_ACCESS_KEY_ID;

const secretAccessKey = OBS_SECRET_ACCESS_KEY;

// 创建ObsClient实例

const obsClient = new ObsClient({

  access_key_id: accessKeyId,

  secret_access_key: secretAccessKey,

  server: endpoint,

});

// ... 其余代码保持不变 ...

4. 类型声明

为了避免 TypeScript 报错，您可能需要添加一个类型声明文件。创建一个 env.d.ts 文件：

env.d.ts

Ask

Copy

Apply

declare module '@env' {

  export const OBS_BUCKET: string;

  export const OBS_ENDPOINT: string;

  export const OBS_ACCESS_KEY_ID: string;

  export const OBS_SECRET_ACCESS_KEY: string;

}

这些步骤完成后，您的环境变量就可以正确地被加载和使用了。记住以下几点：

- 将 .env 文件添加到 .gitignore 中，避免敏感信息被提交到版本控制系统。

- 对于不同的环境（开发、测试、生产），可以创建不同的 .env 文件（如 .env.development、.env.production）。

- 在团队中安全地共享这些环境变量，可以考虑使用密钥管理系统。

如果您在实施过程中遇到任何问题，或者需要进一步的解释，请随时告诉我。我很乐意为您提供更多帮助。